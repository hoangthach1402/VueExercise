// Sound service for playing audio feedback
class SoundService {
    constructor() {
      this.userInteracted = false;
      // Lắng nghe sự kiện user interaction để cho phép phát âm thanh
      const unlock = () => {
        this.userInteracted = true;
        window.removeEventListener('click', unlock);
        window.removeEventListener('keydown', unlock);
      };
      window.addEventListener('click', unlock);
      window.addEventListener('keydown', unlock);
      this.correctSound = new Audio();
      this.incorrectSound = new Audio();
      this.typingSound = new Audio();
      
      // Using base64 encoded short sounds to avoid needing external files
      this.correctSound.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAASAAAJhwBJSUlJSUlJSUlJc3Nzc3Nzc3Nzc3OgoKCgoKCgoKCgoMfHx8fHx8fHx8fH5OTk5OTk5OTk5OT////////////////////7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/tMYXZmNTguMTQ0ABAAAAAAAAAAEQAAADAAAArFDKSGvgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/74EAAAAwoEQxFTGYQjIcVVLeMwhPBhOIIFMJhEjC0QAKYTCJGLJFUCCFRFAwgQIEDy9AgQIECD//C4Pl4P///8QQPLw+Xg//iCB5///Pwf//oEDBAwQMEDBAwPX7YXt7Y83339vhw4JBAIAiSbicgCbmkIU0ykHADX+gZQHUlg37PXbsRNfRoAoIALSBLZrKfwzETHamYiaeiPuJ/S7yQoAgAMPZLKSBiCpjoGHnLUELDgZeKAlg/v/BptYAGTt/9u9nq9VZVbQeA7gGIaZ8voG7y/+bsF0hWvqPgOkLy7IAnNKZyC8hUQcEJChFTrFToyhBgVXMnElBYmVD1KyjQKmFjxQjEn2kA0X3pAwhPRIEgNUgAkUAFSToQEWWKdaHDuwi6RJztuiLioCi0gAsMBTkGzk7c1JtcMClQkAACKIwMjYCDAAIwBAPg5X9zAx9ATIlROQFDAcAVrDsyBgEKBhhYIYBDUGKQDmaIdTKaLgEIHSbh4IMbAElQUVGXlBBUIJYTQVRuqLKnAwl5fEmxJiDuW0//IZ16jOwYZ/MgHYMkl//l2kjAFFgNYjM7OUHcmNDUZOqBWJhJcDFCgq4yZTK0CuqlbA6Y9BdZSsQu1A0xnS1AwYAGLiZRBxAP4Y8DCMjVEX1I3V//l2kjZFYjeT//6sQUZOl//84JfV//54a+r//52NX1f/+fDV1AAAIAx04oCTTTx3oCj6AANbQWQAAANAAKCCACmAEAEYAYAKAEAAWAAqYAoAGgQACQDDAAQFABIBKDx0CgCoAyAJQAkABmYIiAmZgiAiZTGwBVCM0SDSIGGDIAUYdQoxhIAWA4ViKAxCoTAUgCrMmYwAAAGGBsAhyYAwABBgSgAiGAoY6jgIlAQtAVACQAECkATGBWALGYoACIAARGYcQGRhUACSHjHULpRWJgCAFKuXdGGyHggYABUABRMBiIYMJAeJgHgFBJr5VBhECAwUAAQsJiARAzXzWTPIqGAIFAAbzAI4AJqXEwlYABkbJLm14X1yCjACCkFgbAiZKsNCfMAJgEzEIODAwFTCJEBUKBF6cEZLf/+1Jk+wz5lYRJPaxGNDdwqSeqiMaB7BEi96zZUL8CZI6pmyo3WABEPByFSdKgJICwAqIcMHAEwMBGTlWlsKlf';
  
      this.incorrectSound.src = 'data:audio/mp3;base64,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';
      
      this.typingSound.src = 'data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAADwADp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6elMYXZmNTguMTQ0ABAAAAAAAAAAEQAAADAAAAsA7LQW6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UARIAPhcAQgH8YAAAIBAACP4wAAQDQFBgfwYAAA0ACg/jAAAAAMVZz0Dg8AAAAAAAAD/AvmVsHhwAAAAAAAAABAsrl4PAAAAAAAAAA+XL//wuAAAAAAAAAAIFy5eXwuAAAAAAAAAADy5f/i4AAAAAAAAAAAMXL/+XL/y4eAAAAAAAAAAHLl//Lw/+FwAAAAAAAAAAPLl//Lw//AuAAAAAAAAAAAAAAAAQIBoAAAQIAAAAAADFgYMAwcxCQ8TCwMIBAMNBRYVDwwKARwDGQoKHg8QBAYKAA8CCg8QCBYECQwFDxAHCA4QCgwPDA4ZBw0JDAgYCQsZEwoIFwYTCwAKCQsDCwoXDA8MCA8BDBAJDAQPEAkdDA0YGQsDCQ8ZGQ0PCBsKCB4MHQoSDRkLChsQDg8SCgcZGRgMDRgYDgIZCwoMDAsLGQsGCQoQCwsKCQgMGQ8QDwgYCxoKDBkLCwkKDBgCCwUFCAIPBAgSBQsHCQoMDRcODw8PDwAAAAALAbAA';
    }
  
    /**
     * Play correct answer sound
     */
    playCorrect() {
      if (!this.userInteracted) return;
      this.correctSound.currentTime = 0;
      this.correctSound.play().catch(err => console.error('Error playing correct sound:', err));
    }
  
    /**
     * Play incorrect answer sound
     */
    playIncorrect() {
      if (!this.userInteracted) return;
      this.incorrectSound.currentTime = 0;
      this.incorrectSound.play().catch(err => console.error('Error playing incorrect sound:', err));
    }
  
    /**
     * Play typing key sound
     */
    playTypingSound() {
      if (!this.userInteracted) return;
      this.typingSound.currentTime = 0;
      this.typingSound.play().catch(err => console.error('Error playing typing sound:', err));
    }
  }
  
  // Export a singleton instance
  export const soundService = new SoundService();
  
  export default soundService;
  